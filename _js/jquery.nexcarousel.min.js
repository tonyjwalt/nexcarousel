/*
 * Written by:  Tony Walt
 * Notes:       Jquery Widget carousel written to be responsive and rely on a sandbaging technique
 *              to maintain proper sizing and aspect ratio.
 *              It was written for a specific use. Please feel free to fork it, but I
 *              would greatly appreciate any changes so that I can continue to improve upon this.
 * Requires:    jQuery 1.9+
 * Requires:    jQuery UI 1.8.16+
 */
if(typeof jQuery==="undefined"){throw"This widget requires jquery module to be loaded"}(function(e){var t={options:{height:"min",autoInterval:5e3,animSpeed:1e3,autoPlay:true,activeClass:"active",imglistClass:".slide-list",useBullets:true,bulletlistClass:".bullet-list",bulletItemIdentifier:"li",toSandbag:true,animationType:"auto",useNav:true,carouselNavContClass:".carousel-nav"},_create:function(){var t=this;t.exists=true;t.inta=null;if(t.animationType!="css"||t.animationType!="js"){t.animationType=Modernizr.csstransitions?"css":"js"}e.each(t.options,function(e,n){t[e]=n})},_init:function(){var t=this;i=0;t.$viewer=t.element;t.$ImgList=e(t.imglistClass,t.element);t.ImgItems=e("li",t.$ImgList);if(t.animationType!="css"||t.animationType!="js"){t.animationType=e("html").hasClass("csstransitions")?"css":"js"}if(t.animationType=="js"){t.ImgItems.hide()}else{t.ImgItems.addClass("csshide")}t.$ImgItemArr=[];t._populateJQArr(t.ImgItems,t.$ImgItemArr);if(t.useBullets){t.$BulletList=e(t.bulletlistClass,t.element);t.$BulletItems=t.$BulletList.find(t.bulletItemIdentifier);t.$BulletItemArr=[];t._populateJQArr(t.$BulletItems,t.$BulletItemArr);t._bindBullets()}if(t.useNav){t._bindNav()}t.activeNum=0;t.$currentEl=e(t.ImgItems[t.activeNum]);t.$currentEl.show();if(t.toSandbag){t._setSizing()}if(t.autoPlay){t._automate()}},_setSizing:function(){var t=this,n=0,r,i;switch(t.height){case"max":t.ImgItems.each(function(t){var i=e(this),s=i.outerHeight();if(s>n){n=s;r=i}});break;case"min":t.ImgItems.each(function(t){var i=e(this),s=i.outerHeight();n=t==0?s:n;if(s<=n){n=s;r=i}});break;default:if(typeof t.height==="number"){r=e(t.ImgItems[0]).clone();r.find("img").height(t.height)}else{t.height="min";t._setSizing();return false}break}i=r.find("img").clone().addClass("sandbag");t.$ImgList.after(i);t.ImgItems.each(function(t){var n=e(this);n.find("img").css({position:"absolute"});n.append(i.clone())});return t},_start:function(){var e=this;e.inta=window.setInterval(function(){e.nextItem()},e.autoInterval)},_automate:function(){var t=this;t._start();t.$viewer.on("stop",function(){window.clearInterval(t.inta)});t.$viewer.on("mouseenter",function(){e(this).trigger("stop")});t.$viewer.on("mouseleave",function(){t._start()});return t},_bindBullets:function(){var t=this;t.$BulletList.on("click",t.bulletItemIdentifier,function(n){n.preventDefault();var r=t._normalizeNum(e.inArray(this,t.$BulletItems));t.swapSlide(r)})},_bindNav:function(){var t=this;e(t.carouselNavContClass).on("click","button",function(n){n.preventDefault();var r=e(this),i=Number(r.attr("data-advance"))+t.activeNum,s=t._normalizeNum(i);t.swapSlide(s)})},_normalizeNum:function(e){var t=this.ImgItems.length,e=e<0?t-1:e,e=e>t-1?e-t:e;return e},_populateJQArr:function(t,n){var r=0;for(;r<t.length;r++){var i=e(t[r]);n.push(i)}},_swapCSS:function(e){var t=this;t.$ImgItemArr[t.activeNum].removeClass(t.activeClass);t.$ImgItemArr[e].addClass(t.activeClass);t._finishSwap(e)},_swapJS:function(e){var t=this;t.$ImgItemArr[t.activeNum].fadeOut(t.animSpeed);t.$ImgItemArr[e].fadeIn(t.animSpeed);t._finishSwap(e)},_finishSwap:function(e){var t=this;t.$BulletItemArr[t.activeNum].removeClass(t.activeClass);t.$BulletItemArr[e].addClass(t.activeClass);t.activeNum=e},nextItem:function(){transNum=this._normalizeNum(this.activeNum+1);this.swapSlide(transNum);return this},swapSlide:function(e){var t=this;if(t.animationType=="css"){t._swapCSS(e)}else{t._swapJS(e)}return this},pauseSlides:function(){var t=this;e(this).trigger("stop");return t},startSlides:function(){var e=this;e._start();return e}};e.widget("ui.NexCarousel",t)})(jQuery)